@{
    ViewBag.Title = "Home Page";
}

@{
    List<MVC_Charming.Models.Producto> listax = ViewBag.Loquequiera;
    MVC_Charming.Models.Usuario usu = ViewBag.Usu;
    int cont = 0;


}


<link href="~/Css/CssIndex.css" rel="stylesheet" />
<script src="//cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
@*<script src="~/Scripts/jquery-3.4.1.js"></script>*@



<div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel">
    <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselExampleFade" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExampleFade" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleFade" data-bs-slide-to="2" aria-label="Slide 3"></button>
        <button type="button" data-bs-target="#carouselExampleFade" data-bs-slide-to="3" aria-label="Slide 3"></button>
    </div>

    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="~/Imagen/Carrusel/carrusel1hombrecharming.jpg" class="d-block w-100" alt="..." />

        </div>
        <div class="carousel-item">
            <img src="~/Imagen/Carrusel/carrusel2hombrecharming.jpg" class="d-block w-100" alt="..." />

        </div>
        <div class="carousel-item">
            <img src="~/Imagen/Carrusel/carrusel1mujercharming.jpg" class="d-block w-100" alt="..." />

        </div>
        <div class="carousel-item">
            <img src="~/Imagen/Carrusel/carrusel2mujercharming.jpg" class="d-block w-100" />
        </div>
    </div>

    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>



<div id="content">
    <section class="sidebar">
        <input id="txtbuscar" type="text" placeholder="Buscar..." />

        <div id="menubar">
            <nav class="menuxss">
                <h2>FILTRO</h2>
                <hr style="margin-top: 0px; margin-bottom:0px;" />
                <ul>
                    <li><a Class="buttonfiltro" href="@Url.Action("Buscador","SearchProduct", new { GENERO="H"} )">Hombre</a></li>
                    <li><a Class="buttonfiltro" href="@Url.Action("Buscador","SearchProduct", new { GENERO="M"})">Mujer</a></li>
                </ul>
            </nav>

            <nav class="menuxss">
                <h2>ROPA</h2>
                <hr style="margin-top: 0px; margin-bottom:0px;" />
                <ul>
                    <li><a Class="buttonfiltro" href="@Url.Action("Buscador","SearchProduct", new { CATEGORIAS=5} )">Blusas</a></li>
                    <li><a Class="buttonfiltro" href="@Url.Action("Buscador","SearchProduct", new { CATEGORIAS=2} )">Polos</a></li>
                    <li><a Class="buttonfiltro" href="@Url.Action("Buscador","SearchProduct", new { CATEGORIAS=1} )">Poleras</a></li>
                    <li><a Class="buttonfiltro" href="@Url.Action("Buscador","SearchProduct", new { CATEGORIAS=0} )">Vestidos</a></li>
                    <li><a Class="buttonfiltro" href="@Url.Action("Buscador","SearchProduct", new { CATEGORIAS=3} )">Camisas</a></li>
                    <li><a Class="buttonfiltro" href="@Url.Action("Buscador","SearchProduct", new { CATEGORIAS=4} )">Casacas</a></li>
                </ul>
            </nav>

            <nav class="menuxss">
                <h2>TALLAS</h2>
                <hr style="margin-top: 0px; margin-bottom:0px;" />
                <ul>
                    <li><a Class="buttonfiltro" href="@Url.Action("Buscador","SearchProduct", new { TALLAS=1} )">TALLA S</a></li>
                    <li><a Class="buttonfiltro" href="@Url.Action("Buscador","SearchProduct", new { TALLAS=2} )">TALLA M</a></li>
                    <li><a Class="buttonfiltro" href="@Url.Action("Buscador","SearchProduct", new { TALLAS=3} )">TALLA L</a></li>
                    <li><a Class="buttonfiltro" href="@Url.Action("Buscador","SearchProduct", new { TALLAS=4} )">TALLA XL</a></li>
                </ul>
            </nav>

            <nav class="menuxss">
                <h2>PRECIO</h2>
                <hr style="margin-top: 0px; margin-bottom:0px;" />
                <ul>
                    <li><a href="@Url.Action("WarningFatalError","Error404")" Class="buttonfiltro">S/ 20 - S/ 100</a></li>
                    <li><a href="@Url.Action("WarningFatalError","Error404")" Class="buttonfiltro">S/ 100 - S/ 250</a></li>
                    <li><a href="@Url.Action("WarningFatalError","Error404")" Class="buttonfiltro">S/ 250 - S/ 350</a></li>
                </ul>
            </nav>
        </div>
    </section>





    <section class="mainContent">
        @foreach (var producto in listax)
        {
            cont++;

            <div class="productInfo">
                <div class="editor-item">
                    <div class="imgcla">
                        @if (producto.ImagenProducto != null)
                        {
                            <a href="@Url.Action("ObservarProducto","Look", new { CODPROD=producto.CodProduct} )">

                                <img  class="productImg" src="~/Imagen/Productos/@producto.ImagenProducto" />
                                <p id="datoImg_@cont" class="esconder">/Imagen/Productos/@producto.ImagenProducto</p>
                            </a>

                        }
                        else
                        {
                            <img src="~/Imagen/Productos/No-image-available.png" />
                        }

                    </div>
                    <div class="visual">
                        <a href="@Url.Action("ObservarProducto","Look", new { CODPROD=producto.CodProduct} )" class="eye"> <i class="far fa-eye"></i></a>
                    </div>
                </div>
                <p id="IDPRECIO_@cont" class="price"> S/ @producto.Precio<p>
                <p id="NomProd_@cont" class="productContent"> @producto.NombreProducto</p>


                <button id="@producto.IDProducto" type="submit" class="buyButton">Observar</button>



            </div>
            if (cont == 9)
            {
                break;
            }

        }

    </section>
</div>




<script type="text/javascript">

    $(document).ready(function () {
        var contador = "@cont";

        $(document).on('click', 'button[class="buyButton"]', function (event) {
            let id = this.id;

            var url = "@Url.Action("BuscarProducto", "Home")";
            datos = { "id": id };

            $.ajax({
                type: "POST",
                url: url,
                data: datos,
                success: function (datos) {
                    var RutaImg = "/Imagen/Productos/".concat(datos.ImagenProducto);
                    Swal.fire({
                        title: datos.NombreProducto,
                        text: datos.Precio,
                        imageUrl: RutaImg,
                        imageWidth: 700,
                        imageHeight: 400,
                        width: 400,
                        imageAlt: 'Custom image',
                    })
                }

            });

            return false;
        });

    });


</script>